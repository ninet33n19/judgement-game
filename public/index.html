<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, viewport-fit=cover"
        />
        <title>Judgement</title>
        <link rel="stylesheet" href="styles.css" />
    </head>

    <body>
        <div id="app">
            <!-- Connection Status -->
            <div id="connection-status" class="connection-status hidden">
                <span class="dot"></span>
                <span class="text">Connected</span>
            </div>

            <!-- Join Screen -->
            <div id="join-screen" class="screen">
                <div class="card-container">
                    <div class="screen-title">
                        <div class="logo">üé¥</div>
                        <h1>Judgement</h1>
                        <p class="screen-subtitle">A card game of strategy</p>
                    </div>

                    <div class="input-group">
                        <label class="form-label" for="name-input"
                            >Your Name</label
                        >
                        <input
                            type="text"
                            id="name-input"
                            placeholder="Enter your name"
                            maxlength="12"
                            class="input"
                            autocomplete="off"
                        />
                    </div>

                    <button id="create-btn" class="btn btn-primary">
                        Create Room
                    </button>

                    <div class="divider">or</div>

                    <div class="input-group">
                        <label class="form-label" for="room-input"
                            >Room Code</label
                        >
                        <input
                            type="text"
                            id="room-input"
                            placeholder="Enter code"
                            maxlength="6"
                            class="input uppercase"
                            autocomplete="off"
                        />
                    </div>

                    <button id="join-btn" class="btn btn-secondary">
                        Join Game
                    </button>
                </div>
            </div>

            <!-- Lobby Screen -->
            <div id="lobby-screen" class="screen hidden">
                <button id="exit-btn-lobby" class="exit-btn" title="Exit">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <div class="lobby-layout">
                    <div class="lobby-content">
                        <div class="room-card">
                            <div class="room-code-label">Room Code</div>
                            <div class="room-code-group">
                                <div class="room-code-badge">
                                    <span id="room-name" class="code-text"
                                        >------</span
                                    >
                                </div>
                                <button
                                    id="copy-code-btn"
                                    class="icon-btn"
                                    title="Copy code"
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <rect
                                            width="14"
                                            height="14"
                                            x="8"
                                            y="8"
                                            rx="2"
                                            ry="2"
                                        ></rect>
                                        <path
                                            d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"
                                        ></path>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="player-count">
                            <span id="player-count-current">0</span> /
                            <span id="player-count-max">6</span> players
                        </div>

                        <div id="player-grid" class="player-grid"></div>

                        <button id="start-btn" class="start-btn" disabled>
                            Start Game
                        </button>

                        <div class="lobby-footer">
                            <p class="status-text">
                                Waiting for players
                                <span class="status-dots">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bidding Screen -->
            <div id="bidding-screen" class="screen hidden">
                <button id="exit-btn-bidding" class="exit-btn" title="Exit">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

            <div class="bidding-content">
                <div class="header">
                    <div class="info-badge">
                        <span class="label">ROUND</span>
                        <span id="round-num" class="value">-</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">TRUMP</span>
                        <span id="trump-suit" class="value">-</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">CARDS</span>
                        <span id="cards-count" class="value">-</span>
                    </div>
                    <div id="dealer-badge" class="info-badge" style="display: none;">
                        <span class="label">DEALER</span>
                        <span id="dealer-name" class="value">-</span>
                    </div>
                </div>

                <div class="bidding-main">
                    <div class="hand-area-container my-hand-container">
                        <div id="bid-hand-area" class="hand-cards-fan"></div>
                    </div>

                    <div class="bid-controls">
                        <p id="bid-instruction">Waiting for others...</p>
                        <div id="bid-buttons" class="bid-grid"></div>
                    </div>
                </div>

                <div id="player-row" class="players-status-grid"></div>
            </div>
                <div class="info-badge">
                    <span class="label">Trump</span>
                    <span class="value" id="trump-suit">-</span>
                </div>
                <div class="info-badge">
                    <span class="label">Cards</span>
                    <span class="value" id="cards-count">-</span>
                </div>
                <div class="info-badge">
                    <span class="label">Dealer</span>
                    <span class="value" id="dealer-name">-</span>
                </div>
            </div>

            <div class="bidding-main">
                <div class="hand-area-section">
                    <div class="my-hand-container">
                        <div id="bid-hand-area" class="hand-cards-fan"></div>
                    </div>
                </div>

                <div class="bidding-controls">
                    <h3 id="bidding-status">Place your bid</h3>
                    <div id="bid-buttons" class="bid-grid"></div>
                </div>
            </div>

            <div class="players-status-section">
                <div id="player-row" class="player-status-grid"></div>
            </div>
        </div>
    </div>

            <!-- Playing Screen -->
            <div id="playing-screen" class="screen hidden">
                <button
                    id="exit-btn-playing"
                    class="exit-btn-playing"
                    title="Exit"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>

                <!-- Top: Opponents -->
                <div class="opponents-container">
                    <div id="play-player-row" class="opponents-row"></div>
                </div>

                <!-- Middle: Table -->
                <div class="table-container">
                    <div id="play-table-cards" class="table-cards-grid"></div>
                </div>

                <!-- Bottom: Player Dashboard -->
                <div class="player-dashboard">
                    <!-- Bid/Tricks/Avatar Row -->
                    <div class="dashboard-stats-row">
                        <div class="stat-pill">
                            <span>Bid:</span>
                            <span class="value" id="my-bid">-</span>
                        </div>
                        <div class="stat-pill">
                            <span>Tricks:</span>
                            <span class="value" id="my-tricks">0</span>
                        </div>
                        <div class="my-avatar-circle" id="my-mini-avatar"></div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="game-actions">
                        <button id="btn-play-card" class="action-btn" disabled>
                            Play Card
                        </button>
                    </div>

                    <!-- Hand -->
                    <div class="my-hand-container">
                        <div id="hand-area" class="hand-cards-fan"></div>
                    </div>
                </div>

                <!-- Floating Game Info -->
                <div class="game-info-overlay">
                    <div class="info-badge">
                        <span class="label">Round</span>
                        <span class="value" id="play-round-num">1</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">Trump</span>
                        <span class="value" id="play-trump-suit">‚ô†</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">Score</span>
                        <span class="value" id="play-score-display">0</span>
                    </div>
                </div>
            </div>

            <!-- Round Over Screen -->
            <div id="round-over-screen" class="screen hidden">
                <div class="modal-overlay">
                    <div class="modal-card">
                        <div class="modal-header">
                            <h2 class="modal-title">Round Complete!</h2>
                            <p class="modal-subtitle">
                                Results for round
                                <span id="round-result-num">1</span>
                            </p>
                        </div>
                        <div id="round-results" class="results-list"></div>
                        <p class="status-text" style="text-align: center">
                            Next round starting soon...
                        </p>
                    </div>
                </div>
            </div>

            <!-- Game Over Screen -->
            <div id="game-over-screen" class="screen hidden">
                <div class="modal-overlay">
                    <div class="modal-card">
                        <div class="modal-header">
                            <h2 class="modal-title">üèÜ Game Over!</h2>
                            <p class="modal-subtitle">Final standings</p>
                        </div>
                        <div id="final-scores" class="results-list"></div>
                        <div class="modal-actions">
                            <button id="restart-btn" class="btn btn-primary">
                                Play Again
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Toast -->
            <div id="toast" class="toast hidden"></div>
        </div>

        <script
            src="https://cdn.socket.io/4.8.3/socket.io.min.js"
            integrity="sha384-kzavj5fiMwLKzzD1f8S7TeoVIEi7uKHvbTA3ueZkrzYq75pNQUiUi6Dy98Q3fxb0"
            crossorigin="anonymous"
        ></script>
        <script src="client.js"></script>
    </body>
</html>
