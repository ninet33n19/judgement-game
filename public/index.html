<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
        />
        <title>Judgement | Stateless Card Game</title>

        <!-- CSS Dependencies -->
        <link
            rel="stylesheet"
            href="https://unpkg.com/@knadh/oat/oat.min.css"
        />
        <link rel="stylesheet" href="styles.css" />

        <!-- JS Dependencies -->
        <script src="https://unpkg.com/@knadh/oat/oat.min.js" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <script
            src="https://cdn.socket.io/3.1.3/socket.io.min.js"
            integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh"
            crossorigin="anonymous"
        ></script>
        <script src="client.js" defer></script>
    </head>
    <body>
        <div id="app">
            <!-- Status Indicator -->
            <div id="connection-status" class="connection-status hidden">
                <span class="dot"></span>
                <span class="text">Connecting...</span>
            </div>

            <!-- Toast Notifications -->
            <div id="toast" class="toast hidden"></div>

            <!-- 1. Join Screen -->
            <div id="join-screen" class="screen">
                <div class="card-container">
                    <div class="screen-title">
                        <h1 class="logo">Judgement</h1>
                        <p class="screen-subtitle">Multiplayer Card Game</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="name-input"
                            >Display Name</label
                        >
                        <input
                            id="name-input"
                            type="text"
                            placeholder="Your name"
                            maxlength="12"
                            class="btn"
                            style="
                                text-align: left;
                                background: var(--bg-secondary);
                            "
                        />
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="room-input"
                            >Room Code</label
                        >
                        <input
                            id="room-input"
                            type="text"
                            placeholder="6-char code"
                            maxlength="6"
                            class="btn"
                            style="
                                text-align: left;
                                background: var(--bg-secondary);
                                text-transform: uppercase;
                            "
                        />
                    </div>

                    <button id="join-btn" class="btn btn-primary">
                        Join Room
                    </button>
                    <div class="divider"><span>OR</span></div>
                    <button id="create-btn" class="btn btn-secondary">
                        Create Room
                    </button>
                </div>
            </div>

            <!-- 2. Lobby Screen -->
            <div id="lobby-screen" class="screen hidden">
                <div class="lobby-layout">
                    <div class="lobby-content">
                        <div class="room-card">
                            <div class="room-code-group">
                                <span class="room-code-label">Room Code</span>
                                <div class="room-code-badge">
                                    <span id="room-name" class="code-text"
                                        >------</span
                                    >
                                    <button
                                        id="copy-code-btn"
                                        style="
                                            background: none;
                                            border: none;
                                            color: var(--accent-primary);
                                            cursor: pointer;
                                            padding: 4px;
                                        "
                                    >
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="18"
                                            height="18"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        >
                                            <rect
                                                x="9"
                                                y="9"
                                                width="13"
                                                height="13"
                                                rx="2"
                                                ry="2"
                                            ></rect>
                                            <path
                                                d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                                            ></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div
                                style="
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    margin-top: 1rem;
                                "
                            >
                                <span class="room-code-label">Players</span>
                                <span
                                    style="
                                        font-weight: 700;
                                        color: var(--text-primary);
                                    "
                                >
                                    <span id="player-count-current">0</span> /
                                    <span id="player-count-max">6</span>
                                </span>
                            </div>
                        </div>

                        <div id="player-grid" class="player-grid">
                            <!-- Players render here -->
                        </div>

                        <div
                            style="
                                width: 100%;
                                display: flex;
                                flex-direction: column;
                                gap: 0.75rem;
                                margin-top: 1rem;
                            "
                        >
                            <button
                                id="start-btn"
                                class="btn btn-primary"
                                disabled
                            >
                                Start Game
                            </button>
                            <button
                                id="exit-btn-lobby"
                                class="btn btn-secondary"
                            >
                                Exit Room
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Bidding Screen -->
            <div id="bidding-screen" class="screen hidden">
                <div class="game-info-overlay">
                    <div class="info-badge">
                        <span class="label">RD</span>
                        <span id="round-num" class="value">1</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">TRUMP</span>
                        <span id="trump-suit" class="value">‚ô†</span>
                    </div>
                    <div class="info-badge">
                        <span class="label">CARDS</span>
                        <span id="cards-count" class="value">13</span>
                    </div>
                    <div id="dealer-badge" class="info-badge">
                        <span class="label">DEALER</span>
                        <span id="dealer-name" class="value">-</span>
                    </div>
                </div>

                <div class="bid-area">
                    <h2 id="bid-prompt" class="bid-prompt">Your bid?</h2>
                    <div id="bid-buttons" class="bid-buttons">
                        <!-- Bids render here -->
                    </div>
                </div>

                <div id="bid-hand-area" class="hand-area">
                    <!-- Preview hand cards here -->
                </div>

                <div id="player-row" class="player-row">
                    <!-- Players row render here -->
                </div>

                <button id="exit-btn-bidding" class="exit-btn" title="Exit">
                    √ó
                </button>
            </div>

            <!-- 4. Playing Screen -->
            <div id="playing-screen" class="screen hidden" style="padding: 0">
                <div class="game-layout">
                    <button id="exit-btn-playing" class="exit-btn-playing">
                        √ó
                    </button>

                    <div class="game-info-overlay">
                        <div class="info-badge">
                            <span class="label">RD</span>
                            <span id="play-round-num" class="value">1</span>
                        </div>
                        <div class="info-badge">
                            <span class="label">TRUMP</span>
                            <span id="play-trump-suit" class="value">‚ô†</span>
                        </div>
                    </div>

                    <div class="opponents-container">
                        <div id="play-player-row" class="opponents-row">
                            <!-- Opponents render here -->
                        </div>
                    </div>

                    <div class="table-container">
                        <div id="play-table-cards" class="table-cards-grid">
                            <!-- Played cards render here -->
                        </div>
                    </div>

                    <!-- Dashboard at bottom -->
                    <div
                        style="
                            width: 100%;
                            padding: 1rem;
                            display: flex;
                            flex-direction: column;
                            gap: 1rem;
                            background: var(--bg-secondary);
                            border-top: 1px solid var(--glass-border);
                        "
                    >
                        <div
                            style="
                                display: flex;
                                align-items: center;
                                justify-content: space-between;
                                gap: 1rem;
                            "
                        >
                            <div style="display: flex; gap: 0.5rem">
                                <div
                                    class="info-badge"
                                    style="height: 40px; padding: 0 1rem"
                                >
                                    <span class="label">SCORE</span>
                                    <span id="play-score-display" class="value"
                                        >0</span
                                    >
                                </div>
                                <div
                                    class="info-badge"
                                    style="height: 40px; padding: 0 1rem"
                                >
                                    <span id="my-bid" class="value">-</span>
                                    <span class="label">/</span>
                                    <span id="my-tricks" class="value">0</span>
                                </div>
                            </div>

                            <div
                                id="my-mini-avatar"
                                class="opponent-avatar"
                                style="width: 48px; height: 48px; margin: 0"
                            >
                                <!-- My avatar here -->
                            </div>

                            <button
                                id="btn-play-card"
                                class="action-btn"
                                disabled
                                style="flex: 1"
                            >
                                Play Card
                            </button>
                        </div>

                        <div class="my-hand-container">
                            <div id="hand-area" class="hand-cards-fan">
                                <!-- Hand cards render here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. Round Over Screen -->
            <div id="round-over-screen" class="screen modal-overlay hidden">
                <div class="modal-card">
                    <div class="modal-header">
                        <h2 class="modal-title">
                            Round <span id="round-result-num">1</span> Results
                        </h2>
                        <p class="modal-subtitle">Current standings</p>
                    </div>
                    <div id="round-results" class="results-list">
                        <!-- Results render here -->
                    </div>
                    <div class="modal-actions">
                        <button
                            id="exit-btn-roundover"
                            class="btn btn-secondary"
                        >
                            Exit Game
                        </button>
                    </div>
                </div>
            </div>

            <!-- 6. Game Over Screen -->
            <div id="game-over-screen" class="screen modal-overlay hidden">
                <div class="modal-card">
                    <div class="modal-header">
                        <h1 style="font-size: 3rem; margin-bottom: 1rem">üèÜ</h1>
                        <h2 class="modal-title">Final Standings</h2>
                        <p class="modal-subtitle">Game over</p>
                    </div>
                    <div id="final-scores" class="results-list">
                        <!-- Final scores render here -->
                    </div>
                    <div class="modal-actions">
                        <button id="restart-btn" class="btn btn-primary">
                            Play Again
                        </button>
                        <button
                            id="exit-btn-gameover"
                            class="btn btn-secondary"
                        >
                            Menu
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
